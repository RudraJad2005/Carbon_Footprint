{% extends "index.html" %}

{% block content %}
<header class="bg-white text-black-100 fixed w-full top-0 z-50">
    {% include 'navbar.html' %}
</header>

<div class="pt-24 flex justify-center mt-20 mb-20 relative">
    <!-- Container for form and text list -->
    <div class="relative w-full max-w-5xl flex">
        <!-- Form -->
        <div class="relative w-full max-w-4xl bg-white p-6 rounded-lg shadow-md z-10">
            <form method="post" action="{% url 'carbon_footprint_view' %}">
                {% csrf_token %}

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <!-- Row 1 -->
                    <div class="relative p-4 bg-gray-50 rounded-lg border border-gray-200 w-full">
                        <label for="electricity" class="block text-sm font-medium text-gray-700 mb-1">
                            Electricity
                            <span class="relative cursor-pointer group">
                                <span class="text-blue-500">?</span>
                                <span class="absolute left-6 top-0 mt-1 hidden group-hover:block w-40 p-2 bg-gray-700 text-white text-sm rounded-lg shadow-lg">
                                    Electricity consumed in kWh or kg.
                                </span>
                            </span>
                        </label>
                        <input type="number" name="electricity" id="electricity" placeholder="Enter amount"
                            class="w-full mt-1 block rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm py-2 px-3">
                        <select name="electricity_unit" id="electricity_unit" class="mt-2 block w-full rounded-md border-gray-300 text-gray-700 py-2 px-3">
                            <option value="kWh">kWh</option>
                        </select>
                    </div>

                    <div class="relative p-4 bg-gray-50 rounded-lg border border-gray-200 w-full">
                        <label for="natural_gas" class="block text-sm font-medium text-gray-700 mb-1">
                            Natural Gas
                            <span class="relative cursor-pointer group">
                                <span class="text-blue-500">?</span>
                                <span class="absolute left-6 top-0 mt-1 hidden group-hover:block w-40 p-2 bg-gray-700 text-white text-sm rounded-lg shadow-lg">
                                    Natural gas consumed in kWh or kg.
                                </span>
                            </span>
                        </label>
                        <input type="number" name="natural_gas" id="natural_gas" placeholder="Enter amount"
                            class="w-full mt-1 block rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm py-2 px-3">
                        <select name="natural_gas_unit" id="natural_gas_unit" class="mt-2 block w-full rounded-md border-gray-300 text-gray-700 py-2 px-3">
                            <option value="kWh">kWh</option>
                            <option value="kg">kg</option>
                        </select>
                    </div>

                    <div class="relative p-4 bg-gray-50 rounded-lg border border-gray-200 w-full">
                        <label for="biomass" class="block text-sm font-medium text-gray-700 mb-1">
                            Biomass
                            <span class="relative cursor-pointer group">
                                <span class="text-blue-500">?</span>
                                <span class="absolute left-6 top-0 mt-1 hidden group-hover:block w-40 p-2 bg-gray-700 text-white text-sm rounded-lg shadow-lg">
                                    Biomass consumed in kWh or kg.
                                </span>
                            </span>
                        </label>
                        <input type="number" name="biomass" id="biomass" placeholder="Enter amount"
                            class="w-full mt-1 block rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm py-2 px-3">
                        <select name="biomass_unit" id="biomass_unit" class="mt-2 block w-full rounded-md border-gray-300 text-gray-700 py-2 px-3">
                            <option value="kWh">kWh</option>
                            <option value="kg">kg</option>
                        </select>
                    </div>

                    <div class="relative p-4 bg-gray-50 rounded-lg border border-gray-200 w-full">
                        <label for="coal" class="block text-sm font-medium text-gray-700 mb-1">
                            Coal
                            <span class="relative cursor-pointer group">
                                <span class="text-blue-500">?</span>
                                <span class="absolute left-6 top-0 mt-1 hidden group-hover:block w-40 p-2 bg-gray-700 text-white text-sm rounded-lg shadow-lg">
                                    Coal consumed in kWh or kg.
                                </span>
                            </span>
                        </label>
                        <input type="number" name="coal" id="coal" placeholder="Enter amount"
                            class="w-full mt-1 block rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm py-2 px-3">
                        <select name="coal_unit" id="coal_unit" class="mt-2 block w-full rounded-md border-gray-300 text-gray-700 py-2 px-3">
                            <option value="kWh">kWh</option>
                            <option value="kg">kg</option>
                        </select>
                    </div>

                    <div class="relative p-4 bg-gray-50 rounded-lg border border-gray-200 w-full">
                        <label for="heating_oil" class="block text-sm font-medium text-gray-700 mb-1">
                            Heating Oil
                            <span class="relative cursor-pointer group">
                                <span class="text-blue-500">?</span>
                                <span class="absolute left-6 top-0 mt-1 hidden group-hover:block w-40 p-2 bg-gray-700 text-white text-sm rounded-lg shadow-lg">
                                    Heating oil consumed in kWh, kg, or liters.
                                </span>
                            </span>
                        </label>
                        <input type="number" name="heating_oil" id="heating_oil" placeholder="Enter amount"
                            class="w-full mt-1 block rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm py-2 px-3">
                        <select name="heating_oil_unit" id="heating_oil_unit" class="mt-2 block w-full rounded-md border-gray-300 text-gray-700 py-2 px-3">
                            <option value="kWh">kWh</option>
                            <option value="kg">kg</option>
                            <option value="liters">Liters</option>
                        </select>
                    </div>

                    <div class="relative p-4 bg-gray-50 rounded-lg border border-gray-200 w-full">
                        <label for="lpg" class="block text-sm font-medium text-gray-700 mb-1">
                            LPG
                            <span class="relative cursor-pointer group">
                                <span class="text-blue-500">?</span>
                                <span class="absolute left-6 top-0 mt-1 hidden group-hover:block w-40 p-2 bg-gray-700 text-white text-sm rounded-lg shadow-lg">
                                    LPG consumed in kWh, kg, or liters.
                                </span>
                            </span>
                        </label>
                        <input type="number" name="lpg" id="lpg" placeholder="Enter amount"
                            class="w-full mt-1 block rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm py-2 px-3">
                        <select name="lpg_unit" id="lpg_unit" class="mt-2 block w-full rounded-md border-gray-300 text-gray-700 py-2 px-3">
                            <option value="kWh">kWh</option>
                            <option value="kg">kg</option>
                            <option value="liters">Liters</option>
                        </select>
                    </div>
                </div>

                <div class="pt-5">
                    <div class="flex justify-end">
                        <button type="submit"
                            class="ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                            Calculate
                        </button>
                        <button type="submit"
                            class="ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                            Offset
                        </button>
                    </div>
                </div>
            </form>
        </div>

        <!-- Side Text List -->
    
    </div>
</div>




<!-- Add this to your HTML file -->
<div id="popup-message"
    class="fixed top-0 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white p-4 rounded-lg shadow-lg z-50 hidden">
    <p>This is a pop-up message. It will appear every time you visit the website.</p>
    <button id="close-popup" class="absolute top-2 right-2 bg-gray-900 text-white p-1 rounded-full hover:bg-gray-700">
        &times;
    </button>
</div>


<style>
    .group:hover .tooltip {
        display: block;
    }

    .tooltip {
        display: none;
        top: 100%;
        right: 0;
        transform: translateY(0.5rem);
        z-index: 10;
    }

    /* Add this to your CSS file */
    #popup-message {
        display: none;
        /* hide the popup by default */
    }

    #popup-message.show {
        display: block;
        /* show the popup when the show class is added */
    }
</style>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Function to handle unit change
        function handleUnitChange(event) {
            const dropdownButton = event.target.closest('.dropdown-button');
            const selectedUnit = event.target.getAttribute('data-value');

            // Update the dropdown button with the selected unit
            dropdownButton.querySelector('.selected-unit').textContent = selectedUnit;

            // Hide the dropdown menu after selection
            dropdownButton.nextElementSibling.classList.add('hidden');
        }

        // Attach event listeners to all dropdown items
        document.querySelectorAll('.dropdown-item').forEach(item => {
            item.addEventListener('click', handleUnitChange);
        });

        // Function to toggle dropdown menu visibility
        function toggleDropdownMenu(event) {
            const dropdownMenu = event.target.closest('.dropdown-button').nextElementSibling;
            dropdownMenu.classList.toggle('hidden');
        }

        // Attach event listeners to all dropdown buttons
        document.querySelectorAll('.dropdown-button').forEach(button => {
            button.addEventListener('click', toggleDropdownMenu);
        });

        // Close dropdown if clicked outside
        document.addEventListener('click', function (event) {
            document.querySelectorAll('.dropdown-menu').forEach(menu => {
                if (!menu.contains(event.target) && !menu.previousElementSibling.contains(event.target)) {
                    menu.classList.add('hidden');
                }
            });
        });
    });


    // check if the user has visited the website before
    if (!localStorage.getItem("visited")) {
        // show the popup when the page loads
        document.getElementById("popup-message").classList.add("show");
        // set a flag to indicate that the user has visited the website
        localStorage.setItem("visited", true);
    } else {
        // if the user has visited the website before, only show the popup on page reload
        window.addEventListener("load", function () {
            // show the popup when the page loads
            document.getElementById("popup-message").classList.add("show");
        });
    }

    // add an event listener to the close button
    document.getElementById("close-popup").addEventListener("click", function () {
        // remove the show class to hide the popup
        document.getElementById("popup-message").classList.remove("show");
    });
</script>

{% endblock %}